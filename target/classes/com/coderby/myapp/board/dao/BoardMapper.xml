<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coderby.myapp.board.dao.IBoardRepository">
	<select id="selectBoardListByClass" parameterType="map" resultType="com.coderby.myapp.board.model.BoardVO">
		<![CDATA[
			SELECT
				BOARD_ID			AS "boardId",
				BOARD_CATEGORY		AS "boardCategory",
				BOARD_TITLE			AS "boardTitle",
				CREATED_DATE		AS "createdDate",
				STUDENT_ID			AS "studentId"
			FROM board
			WHERE class_id=#{classId}
			OFFSET #{start}-1 ROWS
			FETCH FIRST 10 ROWS ONLY
		]]>
	</select>

	<select id="selectTotalBoardCountByClass" parameterType="int" resultType="int">
		<![CDATA[
			SELECT COUNT(BOARD_ID) AS "count"
			FROM BOARD
			WHERE CLASS_ID=#{classId}
		]]>
	</select>
	
	<select id="selectBoard" parameterType="int" resultType="com.coderby.myapp.board.model.BoardVO">
		<![CDATA[
			SELECT
				BOARD_ID			AS "boardId",
				BOARD_CATEGORY		AS "boardCategory",
				BOARD_TITLE			AS "boardTitle",
				BOARD_CONTENT		AS "boardContent",
				CREATED_DATE		AS "createdDate",
				STUDENT_ID			AS "studentId",
				CLASS_ID			AS "classId"
			FROM board
			WHERE board_id=#{boardId}
		]]>
	</select>
	
	<insert id="insertBoard" parameterType="com.coderby.myapp.board.model.BoardVO">
		<![CDATA[
			INSERT INTO
				BOARD
					(BOARD_ID, BOARD_CATEGORY, BOARD_TITLE, BOARD_CONTENT, CREATED_DATE, STUDENT_ID, CLASS_ID)
			VALUES
				(SEQ_ENTITY_ID.NEXTVAL, #{boardCategory}, #{boardTitle}, #{boardContent}, SYSDATE, 'song', 3)
		]]>
	</insert>
</mapper>